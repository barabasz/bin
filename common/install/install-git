#!/bin/bash

# THIS SCRIPT IS INTENTIONALLY WRITTEN IN BASH

echo "GHCONFDIR from install-git (before loading): $GHCONFDIR"


# load functions
loadfnurl="https://raw.githubusercontent.com/barabasz/bin/main/common/loadfn"
if command -v loadfn &> /dev/null; then loadfn
else source <(curl -fsSL $loadfnurl); fi

echo "GHCONFDIR from install-git (after loading): $GHCONFDIR"


appname=git
cliname=$appname
dirname=$appname
pkgname=$appname

if [[ "$(isinstalled $cliname)" == "no" ]]; then
    if [[ "$(osname)" == "macos" ]]; then
        xcode-select --install
    else
        export LC_ALL="en_US.UTF-8"
        export LC_CTYPE="en_US.UTF-8"
        aptinstall $pkgname
    fi
fi

if [[ -z "$(git config --global user.email)" ]]; then
    git config --global user.email "abarabasz@gmail.com"
    git config --global user.name "Andrzej Barabasz"
    git config --global core.pager bat
    git config --global core.editor code
fi

verinfo $cliname "$appname"